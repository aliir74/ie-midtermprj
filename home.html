<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Amirkabir Studio</title>

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Oxygen:400,700">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="OwlCarousel2-2.2.0/dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="OwlCarousel2-2.2.0/dist/assets/owl.theme.default.min.css">

    <script src="jquery.min.js"></script>
    <script src="OwlCarousel2-2.2.0/dist/owl.carousel.min.js"></script>
    <script src="https://use.fontawesome.com/e213c5fcce.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--  <link rel="stylesheet" type="text/css" media="all" href="css/animate.css"> -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>


    <div id="viewport1" class="row">
        <div id="tmpdiv">
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                <nav  class="navbar navbar-inverse transparent">
                    <div class="container-fluid">
                        <div class="navbar-header navbar-right">
                            <a class="navbar-brand" href="#">
                                <span>امیرکبیر</span>
                                <span id="blue">استودیو</span>
                                <i class="fa fa-gamepad" aria-hidden="true"></i>
                            </a>
                        </div>
                        <ul class="nav navbar-nav">
                            <li><a id="registerButton" href="hw2/Codes/html/register.html" role="button" class="btn btn-info btn-sm navbar-btn">ثبت نام</a></li>
                            <li><a href="hw2/Codes/html/login.html">ورود</a></li>
                        </ul>
                    </div>
                </nav>
                </div>
                <div class="col-md-2"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div id="html-banner" class="col-md-6">
                    <div id="viewport1-title" class="row viewport-text">
                        مرکز بازی سازی امیرکبیر
                    </div>
                    <br>
                    <div id="viewport1-desc" class="row viewport-text">
                        فللان بیسار بهمانانماشس شمسنتشمیسنت
                    </div>
                    <br>
                    <div id="viewport1-entergame" class="row viewport-text">
                        <button class="btn btn-info navbar-btn">ورود به صفحه‌ی بازی</button>
                        <a href="#">تریلر این بازی <i class="fa fa-play-circle" aria-hidden="true"></i></a>
                    </div>
                </div>
                <div class="col-md-2"></div>
            </div>
        </div>
    </div>

    <div id="slider" class="row owl-carousel owl-theme"></div>
    <div id="newgames" class="row"></div>
    <div id="comments" class="row"></div>
    <div id="connectus" class="row"></div>
    <div id="footer" class="row"></div>
    <div id="copyright" class="row"></div>


    <script>

        var currentBackground = -1;

        var homeData;
        function loadViewport(i) {
            $('#viewport1-title').html( (homeData.response.result.homepage.slider[i].title) );
            $('#viewport1-desc').html( (homeData.response.result.homepage.slider[i].abstract) );
            var imgUrl = (homeData.response.result.homepage.slider[i].large_image);
            $('#viewport1').css('background-image', 'url(' + imgUrl + ')' );
            $('#viewport1').css('background-repeat', 'no-repeat' );
            $('#viewport1').css('background-size', 'cover' );
            if(currentBackground != -1) {
                $("#sOverlay" + currentBackground).removeClass('activeSOverlay');
            }
            currentBackground = i;
            $("#sOverlay" + i).addClass('activeSOverlay');
        }
        $(document).ready(function () {
            $.get('http://api.ie.ce-it.ir/F95/home',function (data) {
                homeData = data;
                loadViewport(1);
                createSlider(data);
            });
        });

        function createSlider(data) {
            var sArray = data.response.result.homepage.slider;
            for (i = 0; i < sArray.length; i++) {
                var s = $("<li><div id='item"+i+"' class='slideBarItem' onclick='loadViewport('"+i+"')'>" +
                    "<div id='sOverlay"+i+"' class='sliderOverlay row'><div id='sText"+i+"' class='sliderText'></div>" +
                    "<div id='sComments"+i+"' class='sliderComments row'></div>" +
                    "<button type='button' id='sButton"+i+"' class='btn btn-default sliderButtons'> صفحه بازی</button>" +
                    "<img class='sliderImage' src="+sArray[i].small_image+"</div>" +
                    "</div></li>");
                //transform: scale(1.3);
                //var s = $("<li id='item"+i+"' class='slideBarItem'><div class='sliderOverlay'><img class='sliderImage' src="+sArray[i].small_image+"</div></li>");
                $("#slider").append(s);
                $("#item"+i).css('background-image', 'url(' + sArray[i].small_image + ')');
                $("#sText"+i).html('بررسی '+sArray[i].title);
                $("#sComments"+i).html('تعداد نظرات: '+sArray[i].number_of_comments);
                $("#item"+i).hover(function () {
                    $("#sButton"+i).css('visibility', 'visible');
                    $("#sComments"+i).css('visibility', 'visible');
                })

            }

            //set focus slide


            jQuery.noConflict();
            $('.owl-carousel').owlCarousel({
                center: false,
                items:2,
                loop:true,
                margin:0,
                responsive:{
                    600:{
                        items:4
                    }
                }
            })
            $('.owl-stage-outer')[0].setAttribute('id', 'slider-row')
        }

    </script>
</body>
</html>